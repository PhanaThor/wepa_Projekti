<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" layout:decorate="~{_layout}">
    <head>
        <title th:text="'Profile [ ' + ${profileName} + ' ]'">Profile</title>
    </head>
    <body>
        <div class="container" layout:fragment="content">
            <div class="card text-white" th:if="${viewedAccount != null}">
                <div class="card-header">
                    <h3 class="card-title">
                        <span th:text="${viewedAccount.profileName}">Profile</span>&apos;s profile
                    </h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-6 col-sm-4 col-md-3 col-lg-2">
                            <div class="card">
                                <div class="card-header">
                                    <span class="card-title">Name: <span th:text="${viewedAccount.name}"></span></span>
                                </div>
                                <img class="card-img-top" th:if="${viewedAccount.profilePicture == null}" th:src="@{/img/no-picture.png}" alt="Profile Picture">
                                <img class="card-img-top" th:if="${viewedAccount.profilePicture != null}" th:src="@{/users/{profileName}/picture/{id}(profileName=${viewedAccount.profileName},id=${viewedAccount.profilePicture.id})" alt="Profile Picture">
                            </div>
                        </div>
                        <div class="col-6 col-sm-8 col-md-9 col-lg-10">
                            <div class="row" th:if="${viewedAccount == account}">
                                <form th:action="@{/users/{profileStr}/picture(profileStr=${account.profileName})}" method="POST" enctype="multipart/form-data">
                                    <div class="form-group">
                                        <label for="file">Picture:</label>
                                        <input class="form-control-file" type="file" name="file" id="file" />
                                    </div>
                                    <div class="form-group">
                                        <label for="description">Description:</label>
                                        <input class="form-control" type="text" placeholder="Description" name="description" id="description" />    
                                    </div>
                                    <input type="submit" value="Add picture" />
                                </form>
                            </div>
                            <div class="row">
                                <div class="card" th:each="picture : ${viewedAccount.pictures}">
                                    <img class="card-img-top" th:src="@{/users/{profileStr}/picture/{id}(profileStr=${picture.owner.profileName},id=${picture.profilePicture.id})">
                                    <div class="card-body">
                                        <p class="card-text" th:text="${picture.description}"></p>
                                    </div>
                                    <div class="card-footer" th:if="${viewedAccount == account}">
                                        <button class="btn btn-sm btn-outline-secondary">Set as profile picture</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body">

                </div>
            </div>
            <div class="card border-danger text-white" th:if="${viewedAccount == null}">
                <div class="card-body text-alert">
                    <h5 class="card-title">Profile not found</h5>
                    Profile <span th:text="${profileName}" class="text-warning"></span> could not be found!
                </div>
            </div>
        </div>
    </body>
</html>